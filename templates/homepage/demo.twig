{% extends "base.twig" %}

{% set page_title %}Try Rector Online{% endset %}
{% set small_headline_design = true %}

{% block main %}
    <div class="container" id="subpage">
        {% form_theme demo_form 'bootstrap_4_layout.html.twig' %}

        <div id="rector_run_form">
            {{ form_start(demo_form) }}
                <div class="row">
                    <div class="col-12 col-md-6">
                        {{ form_row(demo_form.content) }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form_row(demo_form.config) }}
                    </div>
                </div>

                {{ form_row(demo_form.process) }}
            {{ form_end(demo_form) }}
        </div>

        <h2 class="mt-0 mb-0">Result</h2>

        {% if rector_run is not null %}
            {# @var \Rector\Website\Entity\RectorRun rector_run #}
            {% if rector_run.successful %}
                <pre class="language-diff"><code class="language-diff">{{ rector_run.contentDiff }}</code></pre>
            {% else %}
                <div class="alert alert-danger">
                    {{ rector_run.errorMessage }}
                </div>
            {% endif %}

            Permalink:
            <a href="{{ path('demo_detail', {'id': rector_run.id }) }}">{{ rector_run.id }}</a>
        {% else %}
            ...
        {% endif %}
    </div>
{% endblock %}
